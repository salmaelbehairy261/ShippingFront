<div class="container">

    <div class="d-flex mt-2 gap-3 ">
        <div class="form-group mb-3">
            <input type="text" (keyup)="onSearch()" placeholder="بحث" class="form-control me-2" #search>
        </div>
        <div class="form-group mb-3">
            <button (click)="onReset()" class="btn btn-outline-sucess">اعادة ضبط</button>
        </div>
        <div class="form-group mb-3">
            <app-sort (sort)="onSort()"></app-sort>
        </div>
        <div class="form-group mb-3">
            <app-page-size (pageSizeChanged)="onPageSizeChange($event)"></app-page-size>
        </div>
    </div>
    <app-paging-header [totalCount]=" totalCount" [pageNumper]="merchantParams.pageNumper"
        [pageSize]="merchantParams.pageSize"></app-paging-header>

        <button class="btn btn-primary"
                        (click)="addMerchant()">اضافة</button>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>#</th>
                <th>الاسم</th>
                <th>الايميل</th>
                <th>رقم الهاتف</th>
                <th>نسبة العائد</th>
                <th>اسم المتجر</th>
                <th>الفرع</th>
                <th>المحافظة</th>
                <th>الحالة</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let merchant of marchants; let id = index">
                <td>{{ id + 1 }}</td>
                <td>{{ merchant.name }}</td>
                <td>{{ merchant.email }}</td>
                <td>{{ merchant.phone }}</td>
                <td>{{ merchant.returnerPercent }}%</td>
                <td>{{ merchant.storeName }}</td>
                <td>{{ merchant.branchName }}</td>
                <td>{{ merchant.governateName }}</td>
                <td>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="isDeleted{{id}}"
                            [checked]="merchant.isDeleted" (change)="toggleDelete(merchant)"
                            [disabled]="merchant.isDeleted">
                        <label class="form-check-label" for="isDeleted{{id}}">
                            {{ merchant.isDeleted ? 'غير نشط' : 'نشط' }}
                        </label>
                    </div>
                </td>
                <td>
                    <button class="btn btn-primary" *ngIf="!merchant.isDeleted"
                        (click)="editMerchant(merchant.id)">Edit</button>
                </td>
            </tr>
        </tbody>
    </table>
    <div class="d-flex justify-content-center" *ngIf="totalCount>0">
        <app-pager [totalCount]="totalCount" [pageSize]="merchantParams.pageSize"
            (pageChanged)="onPageChanged($event)"></app-pager>
    </div>
</div>
